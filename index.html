<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Toysplace POS</title>
<style>
  body { font-family: Arial; background-color: #0a1a2f; color: #eaeef5; padding: 20px; }
  h1 { color: #1e90ff; }
  table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
  th, td { border: 1px solid #444; padding: 8px; text-align: left; }
  th { background-color: #1e2a4a; }
  input { padding: 5px; margin: 2px; }
  button { padding: 5px 10px; margin: 5px; background-color: #1e90ff; color: white; border: none; cursor: pointer; }
  button:hover { background-color: #0d6efd; }
  .section { margin-bottom: 30px; }
</style>
</head>
<body>

<h1>Toysplace POS</h1>

<div class="section">
<h2>Products</h2>
<input id="prodName" placeholder="Product Name">
<input id="prodRate" placeholder="Rate">
<input id="prodStock" placeholder="Stock">
<button onclick="addProduct()">Add Product</button>
<table id="productTable">
<tr><th>ID</th><th>Name</th><th>Rate</th><th>Stock</th></tr>
</table>
</div>

<div class="section">
<h2>Invoice</h2>
<select id="invoiceProduct"></select>
<input id="invoiceQty" placeholder="Qty" type="number">
<button onclick="addInvoiceItem()">Add Item</button>
<table id="invoiceTable">
<tr><th>Product</th><th>Qty</th><th>Rate</th><th>Amount</th></tr>
</table>
<p>Total: <span id="invoiceTotal">0</span></p>
<button onclick="saveInvoice()">Save Invoice</button>
</div>

<div class="section">
<h2>Purchase</h2>
<select id="purchaseProduct"></select>
<input id="purchaseQty" placeholder="Qty" type="number">
<button onclick="purchaseItem()">Purchase</button>
<table id="purchaseTable">
<tr><th>Product</th><th>Qty</th><th>New Stock</th></tr>
</table>
</div>

<script>
let products = [];
let invoiceItems = [];

function addProduct() {
  const name = document.getElementById("prodName").value;
  const rate = parseFloat(document.getElementById("prodRate").value);
  const stock = parseInt(document.getElementById("prodStock").value);
  if(!name || !rate || isNaN(stock)) { alert("Fill all fields"); return; }
  const id = products.length + 1;
  products.push({id, name, rate, stock});
  renderProducts();
}

function renderProducts() {
  const table = document.getElementById("productTable");
  const invoiceSelect = document.getElementById("invoiceProduct");
  const purchaseSelect = document.getElementById("purchaseProduct");
  table.innerHTML = "<tr><th>ID</th><th>Name</th><th>Rate</th><th>Stock</th></tr>";
  invoiceSelect.innerHTML = "";
  purchaseSelect.innerHTML = "";
  products.forEach(p => {
    table.innerHTML += `<tr><td>${p.id}</td><td>${p.name}</td><td>${p.rate}</td><td>${p.stock}</td></tr>`;
    invoiceSelect.innerHTML += `<option value="${p.id}">${p.name}</option>`;
    purchaseSelect.innerHTML += `<option value="${p.id}">${p.name}</option>`;
  });
}

function addInvoiceItem() {
  const prodId = parseInt(document.getElementById("invoiceProduct").value);
  const qty = parseInt(document.getElementById("invoiceQty").value);
  const product = products.find(p => p.id === prodId);
  if(qty > product.stock) { alert("Not enough stock"); return; }
  const amount = product.rate * qty;
  invoiceItems.push({prodId, qty, rate: product.rate, amount});
  product.stock -= qty;
  renderInvoice();
  renderProducts();
}

function renderInvoice() {
  const table = document.getElementById("invoiceTable");
  let total = 0;
  table.innerHTML = "<tr><th>Product</th><th>Qty</th><th>Rate</th><th>Amount</th></tr>";
  invoiceItems.forEach(item => {
    const product = products.find(p => p.id === item.prodId);
    table.innerHTML += `<tr><td>${product.name}</td><td>${item.qty}</td><td>${item.rate}</td><td>${item.amount}</td></tr>`;
    total += item.amount;
  });
  document.getElementById("invoiceTotal").innerText = total;
}

function saveInvoice() {
  if(invoiceItems.length === 0) { alert("No items"); return; }
  alert("Invoice saved! Total: " + document.getElementById("invoiceTotal").innerText);
  invoiceItems = [];
  renderInvoice();
}

function purchaseItem() {
  const prodId = parseInt(document.getElementById("purchaseProduct").value);
  const qty = parseInt(document.getElementById("purchaseQty").value);
  const product = products.find(p => p.id === prodId);
  product.stock += qty;
  const table = document.getElementById("purchaseTable");
  table.innerHTML += `<tr><td>${product.name}</td><td>${qty}</td><td>${product.stock}</td></tr>`;
  renderProducts();
}
</script>

</body>
</html>
