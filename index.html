<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Toy Store Software ‚Äì Full Version</title>

<style>
/* ================= THEME ================= */
:root{
  --bg:#f8fafc;
  --dark:#0f172a;
  --white:#ffffff;
  --light:#e0f2fe;
  --shadow:0 8px 25px rgba(0,0,0,0.15);
}
*{box-sizing:border-box;font-family:Segoe UI,Arial,sans-serif}
body{margin:0;background:var(--bg)}

/* ================= LOGIN ================= */
.login-screen{height:100vh;display:flex;align-items:center;justify-content:center}
.login-box{background:var(--white);padding:40px;border-radius:18px;width:320px;box-shadow:var(--shadow)}
.login-box h2{text-align:center;margin-bottom:20px}
.login-box input{width:100%;padding:12px;margin-bottom:14px;border-radius:10px;border:1px solid #ccc}
.login-box button{width:100%;padding:12px;border:none;border-radius:10px;background:var(--dark);color:white;cursor:pointer}
.login-box p{text-align:center;color:red}

/* ================= APP ================= */
.app{display:none;min-height:100vh}
.sidebar{width:260px;background:var(--dark);padding:20px;color:white;display:flex;flex-direction:column;justify-content:space-between}
.menu-item{background:white;color:black;padding:14px;border-radius:14px;margin-bottom:10px;cursor:pointer}
.menu-item.selected{background:var(--light);box-shadow:var(--shadow)}
.settings{background:white;color:black;padding:14px;border-radius:14px;cursor:pointer}
.main{flex:1;padding:24px}
.header{background:var(--dark);color:white;padding:16px 26px;border-radius:16px;font-size:22px}
.cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:22px;margin-top:40px}
.card{background:white;padding:30px;border-radius:22px;text-align:center;cursor:pointer}
.card:hover{background:var(--light);box-shadow:var(--shadow)}
.icon{font-size:36px;margin-bottom:10px}

/* ================= TABLES ================= */
table{width:100%;border-collapse:collapse;margin-top:20px}
th,td{padding:10px;border-bottom:1px solid #ddd;text-align:center}
th{background:#f1f5f9}
input,select{padding:6px;border-radius:6px;border:1px solid #ccc;width:100%}
button{cursor:pointer}
.add-btn{padding:8px 14px;border-radius:10px;border:none;background:var(--dark);color:white}

.summary{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-top:30px}
.summary div{background:white;padding:20px;border-radius:16px;box-shadow:var(--shadow)}
</style>
</head>
<body>

<!-- ================= LOGIN SCREEN ================= -->
<div class="login-screen" id="loginScreen">
  <div class="login-box">
    <h2>üîê Developer Login</h2>
    <input id="loginUser" placeholder="Username">
    <input id="loginPass" type="password" placeholder="Password">
    <button onclick="login()">Login</button>
    <p id="loginMsg"></p>
  </div>
</div>

<!-- ================= MAIN APP ================= -->
<div class="app" id="app">
  <div class="sidebar">
    <div id="sidebarMenu"></div>
    <div class="settings">‚öô Settings</div>
  </div>
  <div class="main">
    <div class="header">üß∏ Toy Store Software</div>
    <div id="home" class="cards"></div>
    <div id="content"></div>
  </div>
</div>

<script>
/* ================= LOGIN LOGIC ================= */
const DEV_USER='Dani';
const DEV_PASS='123';

function login(){
  const u=document.getElementById('loginUser').value.trim();
  const p=document.getElementById('loginPass').value.trim();
  if(u===DEV_USER && p===DEV_PASS){
    document.getElementById('loginScreen').style.display='none';
    document.getElementById('app').style.display='flex';
    renderHome();renderSidebar();
  } else {
    document.getElementById('loginMsg').innerText='Invalid login';
  }
}

/* ================= DATA ================= */
const menus=[
  {name:'Invoice',icon:'üßæ'},
  {name:'Purchase',icon:'üì¶'},
  {name:'Cash In Hand',icon:'üí∞'},
  {name:'Profit',icon:'üìà'},
  {name:'Report',icon:'üìä'},
  {name:'Vendors',icon:'üè™'}
];

if(!localStorage.products) localStorage.products=JSON.stringify([]);
if(!localStorage.vendors) localStorage.vendors=JSON.stringify([]);

let active=null;
const sidebar=document.getElementById('sidebarMenu');
const home=document.getElementById('home');
const content=document.getElementById('content');

/* ================= HOME & SIDEBAR ================= */
function renderHome(){
  home.innerHTML='';content.innerHTML='';
  menus.forEach(m=>{
    const c=document.createElement('div');
    c.className='card';
    c.innerHTML=`<div class="icon">${m.icon}</div>${m.name}`;
    c.onclick=()=>selectMenu(m.name);
    home.appendChild(c);
  });
}

function renderSidebar(){
  sidebar.innerHTML='';
  menus.forEach(m=>{
    const d=document.createElement('div');
    d.className='menu-item'+(active===m.name?' selected':'');
    d.innerText=`${m.icon} ${m.name}`;
    d.onclick=()=>selectMenu(m.name);
    sidebar.appendChild(d);
  });
}

function selectMenu(name){
  active=name;renderSidebar();home.innerHTML='';
  if(name==='Invoice') showInvoice();
  else if(name==='Purchase') selectVendor();
  else if(name==='Vendors') showVendors();
  else content.innerHTML=`<h2>${name}</h2><p>Module coming next</p>`;
}

/* ================= INVOICE ================= */
function showInvoice(){
  content.innerHTML=`<h2>Invoices <button class='add-btn'>‚ûï</button></h2>
  <table><tr><th>S No</th><th>Date</th><th>Bill No</th><th>Qty</th><th>Amount</th><th>Discount</th><th>Total</th><th>Time</th></tr></table>`;
}

/* ================= PURCHASE ================= */
function selectVendor(){
  const v=JSON.parse(localStorage.vendors);
  const opt=v.map(x=>`<option>${x.name}</option>`).join('');
  content.innerHTML=`<h2>Select Vendor</h2>
  <select id='vendorSel'><option value=''>Select Vendor</option>${opt}</select><br><br>
  <button class='add-btn' onclick='openPurchase()'>Continue</button>`;
}

function openPurchase(){
  const vendor=document.getElementById('vendorSel').value;
  if(!vendor){alert('Select vendor');return;}
  content.innerHTML=`<h2>Purchase ‚Äì ${vendor}</h2>
  <table id='pTable'>
  <tr><th>S No</th><th>Barcode</th><th>Item No</th><th>Description</th><th>Qty</th><th>Rate</th><th>Amount</th></tr>
  </table>
  <button class='add-btn' onclick='addPurchaseRow()'>‚ûï Add Item</button>
  <div class='summary'>
    <div>Amount<br><b>Rs. 0.00</b></div>
    <div>Discount<br><b>Rs. 0.00</b></div>
    <div>Total<br><b>Rs. 0.00</b></div>
  </div>`;
}

function addPurchaseRow(){
  const t=document.getElementById('pTable');
  const r=t.insertRow();
  r.innerHTML=`<td>${t.rows.length-1}</td><td><input onblur='checkProduct(this)'></td><td><input></td><td><input></td><td><input type='number' value='1'></td><td><input type='number'></td><td>Rs. 0.00</td>`;
}

function checkProduct(el){
  const val=el.value.trim();
  if(!val) return;
  const p=JSON.parse(localStorage.products);
  if(!p.find(x=>x.barcode===val)){
    if(confirm('Product not found. Create new product?')){
      p.push({barcode:val});
      localStorage.products=JSON.stringify(p);
    }
  }
}

/* ================= VENDORS ================= */
function showVendors(){
  const v=JSON.parse(localStorage.vendors);
  const rows=v.map((x,i)=>`<tr><td>${i+1}</td><td>${1000+i}</td><td>${x.name}</td><td>${x.balance||0}</td><td>0</td><td>0</td></tr>`).join('');
  content.innerHTML=`<h2>Vendors <button class='add-btn' onclick='addVendor()'>‚ûï</button></h2>
  <table><tr><th>S No</th><th>Vendor No</th><th>Name</th><th>Balance</th><th>Last Purchase</th><th>Last Payment</th></tr>${rows}</table>`;
}

function addVendor(){
  content.innerHTML=`<h2>New Vendor</h2>
  <input id='vname' placeholder='Name (Required)'><br><br>
  <input placeholder='Location'><br><br>
  <input placeholder='Opening Balance'><br><br>
  <input placeholder='Limit Alert'><br><br>
  <input placeholder='Credit Limit'><br><br>
  <button class='add-btn' onclick='saveVendor()'>Done</button>`;
}

function saveVendor(){
  const name=document.getElementById('vname').value.trim();
  if(!name){alert('Name is required');return;}
  const v=JSON.parse(localStorage.vendors);
  v.push({name,balance:0});
  localStorage.vendors=JSON.stringify(v);
  showVendors();
}
</script>
</body>
</html>
