<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Toy Store Software</title>
<style>
:root{
 --dark:#0b2a4a;
 --light:#38bdf8;
 --bg:#f4f6f8;
 --card:#fff;
}
body{margin:0;font-family:Segoe UI;background:var(--bg)}
.hidden{display:none}
header{
 height:64px;background:var(--dark);color:#fff;
 display:flex;align-items:center;padding:0 24px;
 font-size:20px;font-weight:600
}
#app{display:none;height:100vh;flex-direction:column}
.container{flex:1;display:flex}
.sidebar{
 width:260px;background:var(--dark);color:#cbd5e1;
 display:flex;flex-direction:column
}
.nav{
 padding:18px 24px;cursor:pointer;font-size:16px;
}
.nav.active{
 color:#fff;
 background:rgba(255,255,255,.08);
 border-bottom:3px solid #fff;
}
main{flex:1;padding:24px;overflow:auto}
.card{background:#fff;padding:24px;border-radius:14px}
table{width:100%;border-collapse:collapse;margin-top:12px}
th,td{border-bottom:1px solid #ddd;padding:8px}
input,select{padding:6px;width:100%}
button{
 background:var(--dark);color:#fff;border:none;
 padding:10px 16px;border-radius:8px;cursor:pointer
}
.summary{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:16px}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login" style="height:100vh;display:flex;justify-content:center;align-items:center">
<div class="card" style="width:340px">
<h3 align="center">Login</h3>
<input id="u" placeholder="Username"><br><br>
<input id="p" type="password" placeholder="Password"><br><br>
<button onclick="login()">Login</button>
<p id="err" style="color:red;text-align:center"></p>
</div>
</div>

<div id="app">
<header>üß∏ Toy Store Management</header>
<div class="container">
<div class="sidebar">
<div class="nav active" data="home">üè† Home</div>
<div class="nav" data="invoice">üßæ Invoice</div>
<div class="nav" data="purchase">üì¶ Purchase</div>
<div class="nav" data="vendors">üè™ Vendors</div>
<div style="margin-top:auto" class="nav" data="settings">‚öô Settings</div>
</div>
<main id="view"></main>
</div>
</div>

<script>
const USER='Dani',PASS='123';
let vendors=[],products=[];

function login(){
 if(u.value===USER && p.value===PASS){
  login.style.display='none';
  app.style.display='flex';
  load('home');
 } else err.textContent='Invalid Login';
}

document.querySelectorAll('.nav').forEach(n=>{
 n.onclick=()=>{
  document.querySelectorAll('.nav').forEach(x=>x.classList.remove('active'));
  n.classList.add('active');
  load(n.getAttribute('data'));
 }
});

const rs=n=>'Rs. '+Number(n||0).toLocaleString('en-IN',{minimumFractionDigits:2});

function load(page){
 if(page==='home'){
  view.innerHTML=`<div class="card">Welcome to Toy Store Software</div>`;
 }

 if(page==='purchase' || page==='invoice'){
  view.innerHTML=`
  <h2>${page==='purchase'?'Purchase':'Invoice'}</h2>
  <label>Select Vendor</label>
  <select id="vsel">
    <option value="">-- Select Vendor --</option>
    ${vendors.map(v=>`<option>${v.name}</option>`).join('')}
  </select>
  <div id="ptable"></div>`;
  vsel.onchange=()=>openTable(page);
 }

 if(page==='vendors'){
  view.innerHTML=`
  <h2>Vendors <button style="float:right" onclick="addVendor()">‚ûï</button></h2>
  <table>
  <tr><th>S No</th><th>No</th><th>Name</th><th>Balance</th><th>Last Purchase</th><th>Last Payment</th></tr>
  ${vendors.map((v,i)=>`
   <tr>
    <td>${i+1}</td><td>${v.no}</td>
    <td onclick="vendorDetail(${i})" style="color:blue;cursor:pointer">${v.name}</td>
    <td>${rs(v.balance)}</td>
    <td>${rs(v.lastPurchase)}</td>
    <td>${rs(v.lastPayment)}</td>
   </tr>`).join('')}
  </table>`;
 }

 if(page==='settings'){
  view.innerHTML=`<div class="card">Theme & Login Settings</div>`;
 }
}

function addVendor(){
 const name=prompt('Vendor Name');
 if(!name) return;
 vendors.push({
  no:vendors.length+1,
  name,
  balance:0,
  lastPurchase:0,
  lastPayment:0
 });
 load('vendors');
}

function vendorDetail(i){
 const v=vendors[i];
 view.innerHTML=`<h3>${v.name}</h3><p>Ledger coming next</p>`;
}

function openTable(type){
 ptable.innerHTML=`
 <table id="tbl">
 <tr><th>S No</th><th>Barcode</th><th>Item No</th><th>Description</th><th>Qty</th><th>Rate</th><th>Amount</th></tr>
 </table>
 <button onclick="addRow()">+ Add</button>
 <div class="summary">
 <div class="card"><b>Amount</b><div id="amt">Rs.0.00</div></div>
 <div class="card"><b>Discount</b><input id="dr"><input id="dp"></div>
 <div class="card"><b>Total</b><div id="tot">Rs.0.00</div></div>
 </div>`;
 rows=0; addRow();
 dr.oninput=calcDiscRs; dp.oninput=calcDiscPc;
}

let rows=0;
function addRow(){
 rows++;
 tbl.insertAdjacentHTML('beforeend',`
 <tr>
 <td>${rows}</td>
 <td><input></td>
 <td><input></td>
 <td><input></td>
 <td><input type="number" value="1" oninput="calc()"></td>
 <td><input type="number" oninput="calc()"></td>
 <td class="a">Rs.0.00</td>
 </tr>`);
}

function calc(){
 let sum=0;
 document.querySelectorAll('#tbl tr').forEach((r,i)=>{
  if(i===0) return;
  const q=r.children[4].children[0].value||0;
  const rt=r.children[5].children[0].value||0;
  const a=q*rt;
  r.children[6].textContent=rs(a);
  sum+=a;
 });
 amt.textContent=rs(sum);
 tot.textContent=rs(sum-(dr.value||0));
}

function calcDiscRs(){ dp.value=((dr.value/amt.textContent.replace(/[^0-9.]/g,''))*100||0).toFixed(2); calc(); }
function calcDiscPc(){ dr.value=(amt.textContent.replace(/[^0-9.]/g,'')*(dp.value/100)||0).toFixed(2); calc(); }
</script>
</body>
</html>
